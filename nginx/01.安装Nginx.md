# 安装 Nginx

## 包管理方式

### Ubuntu 18.04

```shell
sudo apt-get update
sudo apt-get install nginx

# 查看 nginx 版本
sudo nginx -v

# 查看 nginx 服务状态
sudo systemctl status nginx
```

## [从源代码构建 nginx](http://nginx.org/en/docs/configure.html)

**用法**

```
./configure --help
```

**编译参数**

| 参数                           | 说明                                                         |
| ------------------------------ | ------------------------------------------------------------ |
| --help                         | 打印帮助信息                                                 |
| --prefix=PATH                  | 设置 nginx 的默认存放目录，默认为 /usr/local/nginx           |
| --conf-path=PATH               | 设置 nginx 的配置文件路径，默认为 /usr/local/nginx/conf/nginx.conf |
| --with-threads                 | 开启 nginx 的线程池，主要是为了提升 nginx 读取硬盘的性能     |
| --with-file-aio                | 在 Linux 2.6.22 以上的版本中启用异步 I/O                     |
| --with-http_gzip_static_module | 启用构建 ngx_http_gzip_module 模块，该模块支持发送扩展名为 `.gz` 的文件以压缩响应信息，节约带宽 |
| --with-http_ssl_module         | 启用 HTTPS 支持                                              |
| --without-http_gzip_module     | 禁用 ngx_http_gzip_module 模块<br>--without-http_[模块名] 可以在编译时禁用不用的模块 |
|                                |                                                              |

### Ubuntu 18.04

```shell
# 安装依赖
sudo apt-get update
# 安装 gcc g++ 依赖库
 sudo apt-get install build-essential
 sudo apt-get install libtool
 # 安装 pcre 依赖库
sudo apt-get install libpcre3 libpcre3-dev
 # 安装 zlib 依赖库
sudo apt-get install zlib1g-dev
# 安装 ssl 依赖库

# 下载源码文件
wget http://nginx.org/download/nginx-1.12.2.tar.gz
tar -xzvf nginx-1.12.2.tar.gz
cd nginx-1.12.2
# nginx configure 命令支持的常见参数见下表 
./configure --prefix=/usr/local/nginx
make
sudo make install

cd /usr/local/nginx/sbin
# 启动 nginx
sudo ./nginx
# 重启 nginx
sudo ./nginx -s reload
# 查看 nginx 进程信息
ps -ef | grep nginx
```

